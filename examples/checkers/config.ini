[workflow]
mode = forward
system = serial
niter = 5
save_gradient = yes
save_misfit = yes

[slurm]
name = checkers
nodes = 1
tasks_per_node = 1
time = 01:00:00
modules = intel-mpi/intel/2018.3/64 intel/18.0/64

[preprocess]
method = default
freq_min = no
freq_max = no

[solver]
method = fdm
source = ricker
sh = yes
psv = no
nt = 4800
dt = 0.06

abs_top = no
abs_bottom = yes
abs_left = yes
abs_right = yes
abs_width = 20
abs_alpha = 0.015

threads_per_block = 512
save_velocity = yes
save_displacement = no
save_snapshot = 800
combine_sources = no
interpolate_model = no    # FIXME

[postprocess]
method = default
smooth = 20
smooth_ratio = 0.98
scale = 6.0e6

[optimize]
method = lbfgs
misfit = waveform
precond = 0
step_max = 10
step_thresh = 0.1
vp = no
vs = yes
rho = no

[path]
output = output
model_init = model_init
model_true = model_true
sources = sources.dat
stations = stations.dat
traces = traces